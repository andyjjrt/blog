{"_path":"/cloudflare-+-github-page","_draft":false,"_partial":false,"_empty":false,"title":"Cloudflare + Github Page架設過程","description":"2022-06-30買了自己的網域，本來想說這個blog用一年多前架的hexo繼續寫，但打開發現之前刻的bootstrap好醜，所以大改了一次。But這篇主要的內容在CloudFlare和Github Page的連動，Nuxt的之後再談。","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2022-06-30買了自己的網域，本來想說這個blog用一年多前架的hexo繼續寫，但打開發現之前刻的bootstrap好醜，所以大改了一次。But這篇主要的內容在CloudFlare和Github Page的連動，Nuxt的之後再談。"}]},{"type":"element","tag":"h2","props":{"id":"cloudflare"},"children":[{"type":"text","value":"Cloudflare"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先你要有一個網域，沒有的話去買\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/images/content/2.%20Cloudflare%20+%20Github%20Page%E6%9E%B6%E8%A8%AD%E9%81%8E%E7%A8%8B/1.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"dns-設定"},"children":[{"type":"text","value":"DNS 設定"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"/images/content/2.%20Cloudflare%20+%20Github%20Page%E6%9E%B6%E8%A8%AD%E9%81%8E%E7%A8%8B/2.png"},"children":[]},{"type":"text","value":"\n設定"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"前墜網址.域名"}]},{"type":"text","value":"到"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"username.github.io"}]},{"type":"text","value":"的CNAME記錄(我也不確定這樣描述對不對，但我的理解是一種規則)"}]},{"type":"element","tag":"h3","props":{"id":"強制https"},"children":[{"type":"text","value":"強制https"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"/images/content/2.%20Cloudflare%20+%20Github%20Page%E6%9E%B6%E8%A8%AD%E9%81%8E%E7%A8%8B/5.png"},"children":[]},{"type":"text","value":"\n進到"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SSL/TLS"}]},{"type":"text","value":" > "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"概觀"}]},{"type":"text","value":"裡，將加密模式設為完整\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/images/content/2.%20Cloudflare%20+%20Github%20Page%E6%9E%B6%E8%A8%AD%E9%81%8E%E7%A8%8B/6.png"},"children":[]},{"type":"text","value":"\n並將"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SSL/TLS"}]},{"type":"text","value":" > "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"邊緣憑證"}]},{"type":"text","value":"的強制https打開，雖然github可以設定強制https，但可能是憑證要時間，我這邊還不能使用，先打開這個設定讓這個網址一定是https。"}]},{"type":"element","tag":"h2","props":{"id":"github"},"children":[{"type":"text","value":"Github"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接著進入要對應到的repo > Setting > Pages，在Custom domain地方輸入剛剛設定的網址，接著讓Github去確認，成功驗證後會自動在"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gh-page"}]},{"type":"text","value":"的branch新增一個"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CNAME"}]},{"type":"text","value":"的檔案，應該是讓github記錄用的(因為輸入本來的網址也會被自己導過去)\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/images/content/2.%20Cloudflare%20+%20Github%20Page%E6%9E%B6%E8%A8%AD%E9%81%8E%E7%A8%8B/3.png"},"children":[]}]},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"假如像我一樣當天註冊當天用，有機會驗證失敗，能做的就是等"}]}]},{"type":"element","tag":"h3","props":{"id":"_nuxt無法被讀取"},"children":[{"type":"text","value":"_nuxt無法被讀取"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"配合部屬CI，正確設置的話可能長這樣\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/images/content/2.%20Cloudflare%20+%20Github%20Page%E6%9E%B6%E8%A8%AD%E9%81%8E%E7%A8%8B/4.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"原因是Github Page會自動省略掉底線開頭的資料夾，所以nuxt打包出來的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_nuxt"}]},{"type":"text","value":"就被自己省略掉，所以所有的request右被重新導向到404.html。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用"},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/content/issues/1298#issuecomment-1168376581","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"這個issue的方法"}]},{"type":"text","value":"，在deploy腳本內新增一個"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".nojekyll"}]},{"type":"text","value":"檔案"}]},{"type":"element","tag":"code","props":{"code":"...\n- name: Create .nojekyll to use _nuxt folder\n  run: touch ./dist/.nojekyll\n...\n","language":"yml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"...\n- name: Create .nojekyll to use _nuxt folder\n  run: touch ./dist/.nojekyll\n...\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接著就大功告成了~~"}]}]},"tag":["Cloudflare","Github Page"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2022-06-30買了自己的網域，本來想說這個blog用一年多前架的hexo繼續寫，但打開發現之前刻的bootstrap好醜，所以大改了一次。But這篇主要的內容在CloudFlare和Github Page的連動，Nuxt的之後再談。"}]},{"type":"element","tag":"h2","props":{"id":"cloudflare"},"children":[{"type":"text","value":"Cloudflare"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先你要有一個網域，沒有的話去買\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/images/content/2.%20Cloudflare%20+%20Github%20Page%E6%9E%B6%E8%A8%AD%E9%81%8E%E7%A8%8B/1.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"dns-設定"},"children":[{"type":"text","value":"DNS 設定"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"/images/content/2.%20Cloudflare%20+%20Github%20Page%E6%9E%B6%E8%A8%AD%E9%81%8E%E7%A8%8B/2.png"},"children":[]},{"type":"text","value":"\n設定"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"前墜網址.域名"}]},{"type":"text","value":"到"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"username.github.io"}]},{"type":"text","value":"的CNAME記錄(我也不確定這樣描述對不對，但我的理解是一種規則)"}]},{"type":"element","tag":"h3","props":{"id":"強制https"},"children":[{"type":"text","value":"強制https"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"/images/content/2.%20Cloudflare%20+%20Github%20Page%E6%9E%B6%E8%A8%AD%E9%81%8E%E7%A8%8B/5.png"},"children":[]},{"type":"text","value":"\n進到"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SSL/TLS"}]},{"type":"text","value":" > "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"概觀"}]},{"type":"text","value":"裡，將加密模式設為完整\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/images/content/2.%20Cloudflare%20+%20Github%20Page%E6%9E%B6%E8%A8%AD%E9%81%8E%E7%A8%8B/6.png"},"children":[]},{"type":"text","value":"\n並將"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SSL/TLS"}]},{"type":"text","value":" > "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"邊緣憑證"}]},{"type":"text","value":"的強制https打開，雖然github可以設定強制https，但可能是憑證要時間，我這邊還不能使用，先打開這個設定讓這個網址一定是https。"}]},{"type":"element","tag":"h2","props":{"id":"github"},"children":[{"type":"text","value":"Github"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接著進入要對應到的repo > Setting > Pages，在Custom domain地方輸入剛剛設定的網址，接著讓Github去確認，成功驗證後會自動在"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"gh-page"}]},{"type":"text","value":"的branch新增一個"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CNAME"}]},{"type":"text","value":"的檔案，應該是讓github記錄用的(因為輸入本來的網址也會被自己導過去)\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/images/content/2.%20Cloudflare%20+%20Github%20Page%E6%9E%B6%E8%A8%AD%E9%81%8E%E7%A8%8B/3.png"},"children":[]}]},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"假如像我一樣當天註冊當天用，有機會驗證失敗，能做的就是等"}]}]},{"type":"element","tag":"h3","props":{"id":"_nuxt無法被讀取"},"children":[{"type":"text","value":"_nuxt無法被讀取"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"配合部屬CI，正確設置的話可能長這樣\n"},{"type":"element","tag":"img","props":{"alt":"","src":"/images/content/2.%20Cloudflare%20+%20Github%20Page%E6%9E%B6%E8%A8%AD%E9%81%8E%E7%A8%8B/4.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"原因是Github Page會自動省略掉底線開頭的資料夾，所以nuxt打包出來的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"_nuxt"}]},{"type":"text","value":"就被自己省略掉，所以所有的request右被重新導向到404.html。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用"},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/content/issues/1298#issuecomment-1168376581","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"這個issue的方法"}]},{"type":"text","value":"，在deploy腳本內新增一個"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".nojekyll"}]},{"type":"text","value":"檔案"}]},{"type":"element","tag":"code","props":{"code":"...\n- name: Create .nojekyll to use _nuxt folder\n  run: touch ./dist/.nojekyll\n...\n","language":"yml"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"style":{}},"children":[{"type":"text","value":"...\n- name: Create .nojekyll to use _nuxt folder\n  run: touch ./dist/.nojekyll\n..."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接著就大功告成了~~"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"cloudflare","depth":2,"text":"Cloudflare","children":[{"id":"dns-設定","depth":3,"text":"DNS 設定"},{"id":"強制https","depth":3,"text":"強制https"}]},{"id":"github","depth":2,"text":"Github","children":[{"id":"_nuxt無法被讀取","depth":3,"text":"_nuxt無法被讀取"}]}]}},"_type":"markdown","_id":"content:2.Cloudflare + Github Page架設過程.md","_source":"content","_file":"2.Cloudflare + Github Page架設過程.md","_extension":"md"}